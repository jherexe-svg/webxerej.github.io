<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recuerdo 1 ❤️</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    background: radial-gradient(circle at center, #3b0000, #120000);
    font-family: Georgia, serif;
    overflow:hidden;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

canvas{
    position:absolute;
    top:0;
    left:0;
}

.contenedor{
    position:relative;
    z-index:10;
    width:70%;
    max-width:600px;
    text-align:center;
    padding:20px;
}

.texto-principal{
    font-size: clamp(18px,4vw,26px);
    line-height:1.6;
    opacity:1;
    text-shadow:0 0 10px rgba(255,0,0,0.4);
}
</style>
</head>
<body>

<canvas id="treeCanvas"></canvas>

<div class="contenedor">
    <div class="texto-principal">
        Desde aquel primer momento supe que algo especial comenzaba,
        como una chispa roja iluminando el destino que nos uniría.
    </div>
</div>

<script>
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize",()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

/* ================== ÁRBOL ================== */

let branches = [];
let leaves = [];
let sparkles = [];
let fallingLeaves = [];
let formed = false;

class Branch{
    constructor(x,y,length,angle,width,depth){
        this.x=x;
        this.y=y;
        this.length=length;
        this.angle=angle;
        this.width=width;
        this.progress=0;
        this.depth=depth;
    }

    update(){
        if(this.progress < 1){
            this.progress += 0.02;
        }
    }

    draw(){
        ctx.save();
        ctx.translate(this.x,this.y);
        ctx.rotate(this.angle);

        let grad = ctx.createLinearGradient(0,0,0,-this.length);
        grad.addColorStop(0,"#4a0000");
        grad.addColorStop(0.5,"#8b0000");
        grad.addColorStop(1,"#ff2e63");

        ctx.strokeStyle = grad;
        ctx.lineWidth = this.width;
        ctx.beginPath();
        ctx.moveTo(0,0);
        ctx.lineTo(0,-this.length*this.progress);
        ctx.stroke();

        ctx.restore();
    }
}

function createBranch(x,y,length,angle,width,depth){
    let branch = new Branch(x,y,length,angle,width,depth);
    branches.push(branch);

    if(depth > 0){
        setTimeout(()=>{
            let endX = x + Math.sin(angle)*length;
            let endY = y - Math.cos(angle)*length;

            createBranch(endX,endY,length*0.7,angle-0.5,width*0.7,depth-1);
            createBranch(endX,endY,length*0.7,angle+0.5,width*0.7,depth-1);
        },600);
    } else {
        leaves.push({x:x,y:y});
    }
}

function createTree(){
    let baseX = canvas.width*0.15;
    let baseY = canvas.height*0.9;
    createBranch(baseX,baseY,120,0,10,4);

    setTimeout(()=>{
        formed=true;
        showTextWordByWord();
    },3500);
}

/* ================== HOJAS CORAZÓN ================== */

function drawHeart(x,y,size,color){
    ctx.save();
    ctx.translate(x,y);
    ctx.scale(size,size);
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.bezierCurveTo(-1,-1,-2,1,0,2);
    ctx.bezierCurveTo(2,1,1,-1,0,0);
    ctx.fillStyle=color;
    ctx.fill();
    ctx.restore();
}

/* ================== ANIMACIÓN ================== */

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // partículas brillantes
    if(Math.random() < 0.05){
        sparkles.push({
            x:Math.random()*canvas.width*0.4,
            y:Math.random()*canvas.height,
            size:Math.random()*2+1,
            alpha:1
        });
    }

    sparkles.forEach((s,i)=>{
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.size,0,Math.PI*2);
        ctx.fillStyle=`rgba(255,80,80,${s.alpha})`;
        ctx.fill();
        s.alpha -= 0.02;
        if(s.alpha <= 0) sparkles.splice(i,1);
    });

    branches.forEach(b=>{
        b.update();
        b.draw();
    });

    leaves.forEach(l=>{
        drawHeart(l.x,l.y,5,"#ff4d6d");

        if(Math.random()<0.005){
            fallingLeaves.push({x:l.x,y:l.y,vy:1+Math.random()});
        }
    });

    fallingLeaves.forEach((f,i)=>{
        f.y += f.vy;
        drawHeart(f.x,f.y,4,"#ff1744");
        if(f.y > canvas.height) fallingLeaves.splice(i,1);
    });

    requestAnimationFrame(animate);
}

createTree();
animate();

/* ================== TEXTO PALABRA POR PALABRA ================== */

function showTextWordByWord(){
    const element = document.querySelector(".texto-principal");
    let words = element.innerText.split(" ");
    element.innerHTML="";
    let i=0;

    let interval=setInterval(()=>{
        if(i < words.length){
            element.innerHTML += words[i] + " ";
            i++;
        } else {
            clearInterval(interval);
        }
    },300);
}
</script>

</body>
</html>
