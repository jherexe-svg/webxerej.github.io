<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nuestro Final ❤️</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    overflow:hidden;
    font-family:Georgia, serif;
    height:100vh;
}

canvas{
    position:absolute;
    top:0;
    left:0;
}

/* CONTENIDO PRINCIPAL */
.contenido{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    z-index:10;
    width:85%;
    max-width:450px;
    opacity:0;
    transition:1.5s ease;
}

h1{
    font-size: clamp(30px,7vw,52px);
    margin-bottom:15px;
    color:white;
    text-shadow:
        0 0 15px rgba(255,255,255,0.9),
        0 0 30px rgba(255,50,80,0.8),
        0 0 50px rgba(255,0,0,0.6);
}

p{
    font-size: clamp(16px,4vw,20px);
    line-height:1.6;
    color:#fff0f5;
    text-shadow:0 0 10px rgba(0,0,0,0.6);
}

/* CORAZONES DORADOS */
.corazones{
    position:absolute;
    top:66%;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:16px;
    z-index:15;
    opacity:0;
}

.heart-outline{
    width:36px;
    height:32px;
    position:relative;
    transform:scale(0.8);
    opacity:0;
}

.heart-outline svg{
    width:100%;
    height:100%;
}

.heart-outline path{
    fill:none;
    stroke:#ffd700;
    stroke-width:2.2;
    stroke-linecap:round;
    stroke-linejoin:round;
    stroke-dasharray:200;
    stroke-dashoffset:200;
    filter: drop-shadow(0 0 6px rgba(255,215,0,0.8));
}

/* Letras */
.letra{
    position:absolute;
    top:52%;
    left:50%;
    transform:translate(-50%,-50%);
    font-weight:bold;
    font-size:13px;
    color:#ffd700;
    text-shadow:0 0 6px rgba(255,215,0,0.8);
    opacity:0;
}

/* Animación de dibujo */
@keyframes drawHeart{
    to{
        stroke-dashoffset:0;
    }
}

/* Aparición suave */
@keyframes fadeInScale{
    to{
        opacity:1;
        transform:scale(1);
    }
}

/* Mini latido */
@keyframes miniBeat{
    0%,100%{transform:scale(1);}
    50%{transform:scale(1.15);}
}

/* Brillo animado */
@keyframes brillo{
    from{
        stroke-width:3;
        filter: drop-shadow(0 0 4px gold);
    }
    to{
        stroke-width:4;
        filter: drop-shadow(0 0 12px gold);
    }
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="contenido" id="contenido">
    <h1>Eres mi San Valentín ❤️</h1>
    <p>
        Gracias por ser parte de esta historia.<br>
        Lo mejor apenas comienza.
    </p>
</div>

<!-- CORAZONES SOLO CONTORNO -->
<div class="corazones" id="corazones">
    <div class="heart-outline heart1">
        <svg viewBox="0 0 24 22">
            <path d="M12 21s-6.7-4.6-9.5-8.2C-0.3 9.5 1.5 4.5 5.8 3.6
                     8.3 3.1 10.5 4.4 12 6.3
                     13.5 4.4 15.7 3.1 18.2 3.6
                     22.5 4.5 24.3 9.5 21.5 12.8
                     18.7 16.4 12 21 12 21z"/>
        </svg>
        <div class="letra">N</div>
    </div>

    <div class="heart-outline heart2">
        <svg viewBox="0 0 24 22">
            <path d="M12 21s-6.7-4.6-9.5-8.2C-0.3 9.5 1.5 4.5 5.8 3.6
                     8.3 3.1 10.5 4.4 12 6.3
                     13.5 4.4 15.7 3.1 18.2 3.6
                     22.5 4.5 24.3 9.5 21.5 12.8
                     18.7 16.4 12 21 12 21z"/>
        </svg>
        <div class="letra">J</div>
    </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize",()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    initHeart();
});

let particles=[];
let bgParticles=[];
let progress=0;
let beatTime=0;
let formed=false;

function heartShape(t){
    return{
        x:16*Math.pow(Math.sin(t),3),
        y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
    };
}

function initHeart(){
    particles=[];
    progress=0;
    formed=false;

    const scale=Math.min(canvas.width,canvas.height)/45;

    for(let t=0;t<Math.PI*2;t+=0.025){
        let pos=heartShape(t);
        particles.push({
            x:canvas.width/2,
            y:canvas.height/2,
            tx:canvas.width/2+pos.x*scale,
            ty:canvas.height/2+pos.y*scale,
            alpha:0
        });
    }
}

for(let i=0;i<50;i++){
    bgParticles.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        size:Math.random()*3+1,
        speed:Math.random()*0.5+0.2
    });
}

function drawDynamicBackground(){
    let time=Date.now()*0.0005;

    let gradient=ctx.createRadialGradient(
        canvas.width/2+Math.sin(time)*150,
        canvas.height/2+Math.cos(time)*150,
        0,
        canvas.width/2,
        canvas.height/2,
        canvas.width
    );

    gradient.addColorStop(0,"#ff4d6d");
    gradient.addColorStop(0.4,"#d62828");
    gradient.addColorStop(1,"#3b0000");

    ctx.fillStyle=gradient;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    bgParticles.forEach(p=>{
        p.y-=p.speed;
        if(p.y<0) p.y=canvas.height;

        ctx.beginPath();
        ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
        ctx.fillStyle="rgba(255,255,255,0.3)";
        ctx.fill();
    });
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawDynamicBackground();

    if(progress<1){
        progress+=0.01;
    }else if(!formed){
        formed=true;
        document.getElementById("contenido").style.opacity=1;
        mostrarCorazones();
    }

    if(formed) beatTime+=0.15;

    let beatScale=1;

    if(formed){
        let beat=Math.sin(beatTime);
        beatScale=1+(beat>0?beat*0.12:beat*0.05);
    }

    particles.forEach(p=>{
        if(!formed){
            p.x+=(p.tx-p.x)*0.05;
            p.y+=(p.ty-p.y)*0.05;
            p.alpha+=0.02;
        }

        let cx=canvas.width/2;
        let cy=canvas.height/2;

        let dx=p.tx-cx;
        let dy=p.ty-cy;

        let drawX=formed?cx+dx*beatScale:p.x;
        let drawY=formed?cy+dy*beatScale:p.y;

        ctx.beginPath();
        ctx.arc(drawX,drawY,2.5,0,Math.PI*2);
        ctx.fillStyle=`rgba(255,255,255,${p.alpha})`;
        ctx.shadowColor="white";
        ctx.shadowBlur=12;
        ctx.fill();
        ctx.shadowBlur=0;
    });

    requestAnimationFrame(animate);
}
    function mostrarCorazones(){
    const cont = document.getElementById("corazones");
    const heart1 = document.querySelector(".heart1");
    const heart2 = document.querySelector(".heart2");

    cont.style.opacity = "1";

    // Primer corazón
    setTimeout(()=>{
        heart1.style.opacity="1";
        heart1.style.animation="fadeInScale 0.6s forwards";
        heart1.querySelector("path").style.animation="drawHeart 1s forwards";
        heart1.querySelector(".letra").style.opacity="1";
    },600);

    // Segundo corazón aparece después
    setTimeout(()=>{
        heart2.style.opacity="1";
        heart2.style.animation="fadeInScale 0.6s forwards";
        heart2.querySelector("path").style.animation="drawHeart 1s forwards";
        heart2.querySelector(".letra").style.opacity="1";
    },1300);

    // Mini latido sincronizado
    setTimeout(()=>{
        heart1.style.animation="miniBeat 1.2s infinite";
        heart2.style.animation="miniBeat 1.2s infinite";
    },2500);
}

initHeart();
animate();
    function mostrarCorazones(){
    const cont = document.getElementById("corazones");
    const heart1 = document.querySelector(".heart1");
    const heart2 = document.querySelector(".heart2");

    cont.style.opacity = "1";

    // Primer corazón
    setTimeout(()=>{
        heart1.style.opacity="1";
        heart1.style.animation="fadeInScale 0.6s forwards";
        heart1.querySelector("path").style.animation="drawHeart 1s forwards";
        heart1.querySelector(".letra").style.opacity="1";
    },600);

    // Segundo corazón aparece después
    setTimeout(()=>{
        heart2.style.opacity="1";
        heart2.style.animation="fadeInScale 0.6s forwards";
        heart2.querySelector("path").style.animation="drawHeart 1s forwards";
        heart2.querySelector(".letra").style.opacity="1";
    },1300);

    // Mini latido sincronizado
    setTimeout(()=>{
        heart1.style.animation="miniBeat 1.2s infinite";
        heart2.style.animation="miniBeat 1.2s infinite";
    },2500);
}

</script>

</body>
</html>
